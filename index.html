<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>기록되지 않은 밤</title>
<style>
body{
  background:#000;
  color:#eee;
  font-family:"Noto Serif KR", serif;
  padding:24px;
}
#story{ line-height:1.9; margin-bottom:20px; }
#choices button{
  display:block;
  width:100%;
  margin:6px 0;
  padding:12px;
  background:#111;
  color:#eee;
  border:1px solid #333;
  cursor:pointer;
}
#choices button:hover{ background:#1a1a1a; }
.part{
  margin-top:30px;
  padding-top:10px;
  border-top:1px solid #333;
  color:#777;
  font-size:0.85em;
}
</style>
</head>
<body>

<div id="story"></div>
<div id="choices"></div>
<div class="part" id="part"></div>

<script>
const state = {
  pin:false,
  studiedBooks:false,
  searchedDesk:false
};

function render(text, choices, part){
  story.innerHTML = text;
  choicesDiv.innerHTML = "";
  choices.forEach(c=>{
    const b=document.createElement("button");
    b.textContent=c.text;
    b.onclick=c.action;
    choicesDiv.appendChild(b);
  });
  partDiv.textContent = part;
}

const story=document.getElementById("story");
const choicesDiv=document.getElementById("choices");
const partDiv=document.getElementById("part");

/* PART 0 : 납치 */

function intro(){
render(
`공원은 어두웠다.  
집으로 돌아가는 가장 빠른 길이었다.

뒤에서 발소리가 들린 건  
그때가 처음이었다.

누군가 내 이름을 불렀다.

“태현.”

고개를 돌린 순간,  
세상이 꺼졌다.`,
[
{ text:"눈을 뜬다", action:room }
],
"PART 0 : 기록되지 않은 밤"
);
}

/* PART 1 : 방 */

function room(){
render(
`눈을 뜨자 낯선 천장이 보였다.  
손목에는 로프 자국이 선명하다.

나는 분명 공원에 있었다.  
그리고 누군가 나를 납치했다.`,
[
{ text:"서랍을 뒤진다", action:drawer },
{ text:"옷장을 연다", action:closet },
...(state.pin?[{ text:"문으로 간다", action:door }]:[])
],
"PART 1 : 방"
);
}

function drawer(){
if(!state.pin){
state.pin=true;
render(
`서랍 깊숙한 곳에서 핀셋을 발견했다.  
누군가 의도적으로 숨겨둔 것처럼.`,
[
{ text:"방으로 돌아간다", action:room }
],
"PART 1 : 방 – 서랍"
);
}else{
render(
`이미 뒤질 건 다 뒤졌다.  
서랍은 텅 비어 있다.`,
[
{ text:"방으로 돌아간다", action:room }
],
"PART 1 : 방 – 서랍"
);
}
}

function closet(){
render(
`옷장 안은 비어 있다.  
숨기엔 너무 얕다.`,
[
{ text:"방으로 돌아간다", action:room }
],
"PART 1 : 방 – 옷장"
);
}

function door(){
render(
`핀셋으로 자물쇠를 건드리자  
잠금이 풀렸다.`,
[
{ text:"서재로 이동한다", action:study }
],
"PART 1 : 탈출"
);
}

/* PART 2 : 서재 */

function study(){
render(
`서재는 지나치게 정돈되어 있다.  
이 방은 누군가 자주 사용한 흔적이 있다.`,
[
{ text:"책들을 뒤진다", action:books },
{ text:"서랍을 뒤진다", action:desk },
{ text:"주방으로 간다", action:kitchen }
],
"PART 2 : 서재"
);
}

function books(){
state.studiedBooks=true;
render(
`책들 사이에 메모가 끼워져 있다.

“관찰 대상: 태현  
행동 패턴 기록 완료  
다음 단계 준비 중”`,
[
{ text:"서재로 돌아간다", action:study }
],
"PART 2 : 서재 – 기록"
);
}

function desk(){
state.searchedDesk=true;
render(
`서랍 안에는  
공원 CCTV 캡처 사진이 들어 있다.

내가… 찍혀 있다.`,
[
{ text:"서재로 돌아간다", action:study }
],
"PART 2 : 서재 – 증거"
);
}

/* PART 3 : 주방 */

function kitchen(){
render(
`주방에 들어서는 순간  
밖에서 인기척이 느껴진다.

여기 있으면 안 된다.`,
[
{ text:"화장실로 도망친다", action:bathroom }
],
"PART 3 : 주방"
);
}

function bathroom(){
render(
`문을 잠그고 숨을 죽인다.  
발소리가 점점 멀어진다.`,
[
{ text:"거실로 이동한다", action:living }
],
"PART 4 : 화장실"
);
}

function living(){
render(
`거실이다.  
지하실 문과 현관문이 보인다.`,
[
{ text:"지하실로 간다", action:()=>alert("다음 파트") },
{ text:"현관으로 간다", action:()=>alert("엔딩 분기") }
],
"PART 5 : 거실"
);
}

intro();
</script>

</body>
</html>
