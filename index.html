<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>탈출</title>
<style>
body{
  background:#000;
  color:#eee;
  font-family:"Noto Serif KR", serif;
  padding:24px;
}
#story{
  line-height:1.9;
  margin-bottom:20px;
}
#choices button{
  display:block;
  width:100%;
  margin:6px 0;
  padding:12px;
  background:#111;
  color:#eee;
  border:1px solid #333;
  cursor:pointer;
}
#choices button:hover{
  background:#1a1a1a;
}
.part{
  margin-top:30px;
  padding-top:10px;
  border-top:1px solid #333;
  color:#777;
  font-size:0.85em;
}
</style>
</head>
<body>

<div id="story"></div>
<div id="choices"></div>
<div class="part" id="part"></div>

<script>
const state = {
  pin:false
};

function render(text, choices, part){
  story.innerHTML = text;
  choicesDiv.innerHTML = "";
  choices.forEach(c=>{
    const b=document.createElement("button");
    b.textContent=c.text;
    b.onclick=c.action;
    choicesDiv.appendChild(b);
  });
  partDiv.textContent=part;
}

const story=document.getElementById("story");
const choicesDiv=document.getElementById("choices");
const partDiv=document.getElementById("part");

/* PART 1 : 방 */

function room(){
render(
`눈을 뜨자 낯선 천장이 보였다.  
몸을 움직이려 하자 손목이 욱신거린다.  
로프 자국. 누군가 나를 묶었다는 흔적이다.

기억은 없다.  
언제, 어떻게, 왜 여기 있는지도.

방은 작고 조용하다.  
침대 하나, 오래된 서랍, 비어 있는 옷장, 그리고 잠긴 문.`,
[
{ text:"방을 살핀다", action:room },
{ text:"서랍을 뒤진다", action:drawer },
{ text:"옷장을 연다", action:closet },
...(state.pin?[{ text:"문으로 간다", action:door }]:[])
],
"PART 1 : 방"
);
}

function drawer(){
if(!state.pin){
state.pin=true;
render(
`서랍을 끝까지 잡아당기자 바닥에 닿는 소리와 함께 멈췄다.  
안쪽 틈새에 금속이 반짝인다.

작은 **핀셋**이다.  
의료용인지, 공구인지 알 수 없지만  
잠긴 무언가를 건드리기엔 충분해 보인다.`,
[
{ text:"방으로 돌아간다", action:room }
],
"PART 1 : 방 – 서랍"
);
}else{
render(
`이미 서랍은 비어 있다.  
먼지와 긁힌 자국만 남아 있다.`,
[
{ text:"방으로 돌아간다", action:room }
],
"PART 1 : 방 – 서랍"
);
}
}

function closet(){
render(
`옷장 안은 텅 비어 있다.  
사람이 숨기엔 너무 얕고, 너무 드러난 공간이다.`,
[
{ text:"방으로 돌아간다", action:room }
],
"PART 1 : 방 – 옷장"
);
}

function door(){
render(
`핀셋을 자물쇠 구멍에 넣고 조심스럽게 돌린다.  
짧은 마찰음 뒤, 철컥—  
문이 열린다.

바깥은 어둡고 조용하다.`,
[
{ text:"서재로 이동한다", action:study }
],
"PART 1 : 방 – 탈출"
);
}

/* PART 2 : 서재 */

function study(){
render(
`서재는 이상하리만큼 정돈되어 있다.  
책장, 책상, 그리고 다른 방으로 이어지는 문.

책상 위에 급히 적힌 메모가 놓여 있다.

[메모]
“납치의 목적은 관찰과 실험.
소리를 내지 마라.
주방을 반드시 피할 것.”`,
[
{ text:"책들을 뒤진다", action:study },
{ text:"서랍을 뒤진다", action:study },
{ text:"주방으로 간다", action:kitchen }
],
"PART 2 : 서재"
);
}

/* PART 3 : 주방 */

function kitchen(){
render(
`주방에 발을 들이자  
집 밖에서 무언가 움직이는 기척이 느껴진다.

발소리.  
분명 누군가 있다.

여기서 나가면 들킬 것이다.`,
[
{ text:"화장실로 도망친다", action:bathroom }
],
"PART 3 : 주방"
);
}

/* PART 4 : 화장실 */

function bathroom(){
render(
`화장실 문을 닫고 숨을 죽인다.  
심장 소리가 너무 크게 들리는 것 같다.

잠시 후, 발소리가 멀어진다.`,
[
{ text:"거실로 이동한다", action:living }
],
"PART 4 : 화장실"
);
}

/* PART 5 : 거실 */

function living(){
render(
`거실이다.  
집의 중심처럼 보이는 공간.

앞에는 지하실로 내려가는 문,  
그리고 바깥으로 이어지는 현관문이 있다.

어느 쪽이든, 선택은 한 번뿐일 것 같다.`,
[
{ text:"지하실로 내려간다", action:basement },
{ text:"현관으로 간다", action:entrance }
],
"PART 5 : 거실"
);
}

function basement(){
render(
`지하실 문을 여는 순간  
차가운 공기와 함께 알 수 없는 냄새가 밀려온다.

아래에는…  
(계속)`,
[],
"PART 6 : 지하실"
);
}

function entrance(){
render(
`현관문 앞에 섰다.  
손잡이에 손을 얹는 순간, 등 뒤에서 소리가 난다.

이번 선택이 마지막일지도 모른다.`,
[],
"PART 6 : 현관"
);
}

room();
</script>

</body>
</html>
