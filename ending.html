<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>히든 엔딩 : 112</title>
<style>
body{
background:#000;
color:#eee;
font-family:"Noto Serif KR",serif;
line-height:1.8;
}
#game{
max-width:800px;
margin:60px auto;
padding:20px;
}
.fade{opacity:0;animation:fade 1.5s forwards;}
@keyframes fade{to{opacity:1;}}
button{
width:100%;
padding:14px;
margin-top:20px;
background:#111;
color:#eee;
border:1px solid #444;
cursor:pointer;
}
button:hover{background:#222;}
.memo{color:#aaa;font-style:italic;}
hr{border:0;border-top:1px solid #333;margin:40px 0;}
</style>
</head>

<body>
<div id="game"></div>

<script>
/* ===== 사운드 ===== */
const hiddenBgm = new Audio("./sound/Symmetry.mp3");
const phoneRing = new Audio("./sound/phone.mp3"); // 통화음 (뚜-뚜-)
const connectSfx = new Audio("./sound/connect.mp3"); // 받는 순간
const sirenSfx = new Audio("./sound/siren.mp3");

hiddenBgm.loop = true;
hiddenBgm.volume = 0.5;
phoneRing.loop = true;
phoneRing.volume = 0.9;
connectSfx.volume = 0.9;
sirenSfx.volume = 0.7;

const game = document.getElementById("game");

function render(html){
game.innerHTML = html;
}

/* ===== 시작 ===== */
render(`
<div class="fade">
<h2>공중전화</h2>
<p>112를 눌렀다.</p>
<button onclick="dial()">통화 시도</button>
</div>
`);

function dial(){
hiddenBgm.play().catch(()=>{});
phoneRing.currentTime = 0;
phoneRing.play();

render(`
<div class="fade">
<p>뚜…</p>
<p>뚜…</p>
<p>뚜…</p>
</div>
`);

setTimeout(answer, 3000);
}

/* ===== 경찰 받음 ===== */
function answer(){
phoneRing.pause();
phoneRing.currentTime = 0;
connectSfx.play();

render(`
<div class="fade">
<p><b>경찰:</b> 112입니다.</p>
<p><b>경찰:</b> 판태현 씨죠?</p>
</div>
`);

setTimeout(dialog1, 3000);
}

function dialog1(){
render(`
<div class="fade">
<p><b>나:</b> …네?</p>
<p><b>나:</b> 제 이름을 어떻게…</p>
</div>
`);
setTimeout(dialog2, 3000);
}

function dialog2(){
render(`
<div class="fade">
<p><b>경찰:</b> 위치 확인했습니다.</p>
<p><b>경찰:</b> 지금 그 자리에 그대로 계세요.</p>
<p class="memo">키보드 두드리는 소리가 들린다.</p>
</div>
`);
setTimeout(dialog3, 3500);
}

function dialog3(){
render(`
<div class="fade">
<p><b>나:</b> 누군가… 근처에 있어요.</p>
<p><b>나:</b> 발소리가…</p>
</div>
`);
setTimeout(dialog4, 3000);
}

function dialog4(){
render(`
<div class="fade">
<p><b>경찰:</b> 알고 있습니다.</p>
<p><b>경찰:</b> 절대 뒤돌아보지 마세요.</p>
<p><b>경찰:</b> 곧 도착합니다.</p>
</div>
`);
setTimeout(siren, 3500);
}

/* ===== 구조 ===== */
function siren(){
sirenSfx.play().catch(()=>{});
render(`
<div class="fade">
<p>멀리서 사이렌 소리가 겹쳐 들린다.</p>
</div>
`);
setTimeout(scene1, 3500);
}

function scene1(){
render(`
<div class="fade">
<p>
골목 끝이 붉고 푸른 빛으로 물든다.<br>
그제서야 손에서 수화기가 떨어진다.
</p>
</div>
`);
setTimeout(scene2, 3500);
}

function scene2(){
render(`
<div class="fade">
<p>
경찰은 질문하지 않는다.<br>
신고 내용도, 상황 설명도 요구하지 않는다.
</p>
<p class="memo">이미 알고 있었다는 듯이.</p>
</div>
`);
setTimeout(scene3, 4000);
}

function scene3(){
render(`
<div class="fade">
<hr>
<p>
구급차 안.<br>
창문에 비친 내 얼굴 옆으로
다른 사람의 그림자가 겹친다.
</p>
</div>
`);
setTimeout(finale, 4500);
}

function finale(){
hiddenBgm.volume = 0.35;
render(`
<div class="fade">
<p class="memo">
112는 항상 연결된다.<br>
하지만 누가 받는지는 아무도 모른다.
</p>
<hr>
<h2>히든 엔딩</h2>
<p class="memo">SIREN</p>
</div>
`);
}
</script>
</body>
</html>
